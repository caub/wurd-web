!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define("wurd",[],n):"object"==typeof exports?exports.wurd=n():t.wurd=n()}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}var e={};return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=2)}([function(t,n,e){"use strict";function r(t,n){function e(t){if(!(r=r[t]))return!0}if(!o(t)||"string"!=typeof n)return t;var r=t;return u(n.split("."),e),r}var o=e(3),u=e(1);t.exports=r},function(t,n,e){"use strict";function r(t,n){for(var e=t.length,r=-1;++r<e;)if(n(t[r],r,t))return!0;return!1}t.exports=r},function(t,n,e){"use strict";function r(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}Object.defineProperty(n,"__esModule",{value:!0});var o=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},u=e(0),i=function(t){return t&&t.__esModule?t:{default:t}}(u),c={widgetUrl:"https://edit-v3.wurd.io/widget.js",apiUrl:"https://api-v3.wurd.io"},a=function(t){return Object.keys(t).map(function(n){var e=t[n];return encodeURIComponent(n)+"="+encodeURIComponent(e)}).join("&")},f=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=document.createElement("script");e.src=c.widgetUrl,e.async=!0,e.setAttribute("data-app",t),n.lang&&e.setAttribute("data-lang",n.lang),document.getElementsByTagName("body")[0].appendChild(e)},l=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(e,r){return n.draft&&(r=void 0!==r?r:"["+e+"]"),(0,i.default)(t,e)||r}},s=function(t){return function(n,e,r){var u=void 0;u=Array.isArray(e)?e.reduce(function(t,n){return t[n]="["+n+"]",t},{}):e;var c=(0,i.default)(t,n);c||(c={0:u});var a=0;return Object.keys(c).each(function(t){var e=c[t],i=o({},u,e);r(i,[n,t].join("."),a),a++})}},d=function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments[3];3===arguments.length&&(r=e,e={});var o=a(e),u=c.apiUrl+"/apps/"+t+"/content/"+n+"?"+o;fetch(u).then(function(t){return t.ok?t.json().then(function(t){var n={text:l(t,e),list:s(t)};r(null,t,n)}).catch(function(t){r(t)}):r(new Error("Error loading "+n+": "+t.statusText))}).catch(function(t){r(t)})},p=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};n=o({},n);var e={},u=function(){n.draft=!0,f(t,n)};switch(n.editMode){case!0:u();break;case"querystring":/[?&]edit(&|$)/.test(location.search)&&u()}return{load:function(r){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return new Promise(function(i,c){if(e[r]){var a=e[r];return i(a),void u(null,a)}d(t,r,n,function(t,n){t?(c(t),u(t)):(o(e,n),i(n),u(null,n))})})},get:l(e,n),map:function(t,n){var o=(0,i.default)(e,t)||r({},Date.now(),{}),u=0;return Object.keys(o).map(function(e){var r=o[e],i=u;return u++,n(r,[t,e].join("."),i)})},startEditor:f.bind(null,t,n)}};n.default={connect:p,load:d,startEditor:f},t.exports=n.default},function(t,n,e){"use strict";function r(t){return!(null==t||"object"!==(void 0===t?"undefined":o(t))||Array.isArray(t))}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.exports=r}])});